(()=>{"use strict";({60:function(){var e=this&&this.__awaiter||function(e,t,n,o){return new(n||(n=Promise))((function(i,a){function s(e){try{l(o.next(e))}catch(e){a(e)}}function c(e){try{l(o.throw(e))}catch(e){a(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,c)}l((o=o.apply(e,t||[])).next())}))};console.log("UI carregada");const t=document.getElementById("lista-bibliotecas"),n=document.getElementById("loading"),o=document.getElementById("empty-state"),i=document.getElementById("status"),a=document.getElementById("reload-button"),s=document.getElementById("components-container"),c=document.getElementById("error-container"),l=document.getElementById("info-container"),d=document.getElementById("refresh-button"),r=document.getElementById("library-select"),m=document.getElementById("collections-loading"),p=document.getElementById("collections-list"),u=document.getElementById("collections-empty");function g(e){i.textContent=e,console.log("Status:",e)}function y(){g("Solicitando bibliotecas..."),n.style.display="block",t.style.display="none",o.style.display="none",function(){for(;t.firstChild;)t.removeChild(t.firstChild)}(),parent.postMessage({pluginMessage:{type:"obterBibliotecas"}},"*")}function h(e){c.textContent=e||"Ocorreu um erro desconhecido",c.style.display="block"}function f(){c.style.display="none"}function E(e){l.textContent=e||"",l.style.display=e?"block":"none"}function b(){m.classList.remove("hidden"),p.classList.add("hidden"),u.classList.add("hidden")}function v(){for(;p.firstChild;)p.removeChild(p.firstChild)}console.log("Elementos DOM:",{listaElement:t,loadingElement:n,emptyStateElement:o,statusElement:i,reloadButton:a,componentsContainer:s,errorContainer:c,infoContainer:l,refreshButton:d,librarySelect:r,collectionsLoading:m,collectionsList:p,collectionsEmpty:u}),a.addEventListener("click",(()=>{g("Recarregando..."),y()})),window.onload=()=>{console.log("window.onload disparado"),g("Inicializando..."),y()},window.onmessage=t=>e(void 0,void 0,void 0,(function*(){try{const e=t.data.pluginMessage;if(!e)return void h("Mensagem inválida recebida do plugin");if("error"===e.type)return void h(e.message);if("libraries-data"===e.type){const t=e.libraries||[];E(e.message||""),r.innerHTML="";const n=document.createElement("option");if(n.value="",n.textContent=t.length>0?"Selecione uma biblioteca...":"Nenhuma biblioteca disponível",r.appendChild(n),t.forEach((e=>{const t=document.createElement("option");t.value=e.id,t.textContent=e.name,r.appendChild(t)})),s.innerHTML="",f(),!t||0===t.length)return void(s.innerHTML='<p class="no-components">Não foram encontradas bibliotecas neste arquivo</p>');t.forEach((e=>{if(!e)return;const t=document.createElement("div");t.className="component-item";const n=document.createElement("span");n.className="library-label",n.textContent=e.type||"Biblioteca",t.appendChild(n);const o=document.createElement("div");o.className="component-name",o.textContent=e.name||"Biblioteca sem nome",t.appendChild(o);const i=document.createElement("div");if(i.className="component-id",i.textContent=`ID: ${e.id||"Desconhecido"}`,t.appendChild(i),e.library){const n=document.createElement("div");n.className="library-name",n.textContent=e.library,t.appendChild(n)}s.appendChild(t)}))}if("collections-data"===e.type){const t=e.collections||[];if(v(),0===t.length)return m.classList.add("hidden"),p.classList.add("hidden"),void u.classList.remove("hidden");t.forEach((e=>{const t=document.createElement("div");t.className="collection-item";const n=document.createElement("div");if(n.className="collection-name",n.textContent=e.name,t.appendChild(n),e.type){const n=document.createElement("div");n.className="collection-type",n.textContent=e.type,t.appendChild(n)}p.appendChild(t)})),m.classList.add("hidden"),p.classList.remove("hidden"),u.classList.add("hidden")}}catch(e){console.error("Erro ao processar mensagem:",e),h("Erro ao processar dados: "+(e.message||"erro desconhecido"))}})),d.addEventListener("click",(()=>{s.innerHTML='<p class="no-components">Procurando bibliotecas...</p>',r.innerHTML='<option value="">Carregando bibliotecas...</option>',f(),E(""),b(),parent.postMessage({pluginMessage:{type:"recarregar"}},"*")})),r.addEventListener("change",(()=>{const e=r.value;e?(v(),b(),m.textContent="Carregando coleções...",parent.postMessage({pluginMessage:{type:"carregarColecoes",libraryId:e}},"*")):b()})),g("Aguardando início..."),document.addEventListener("click",(e=>{"close-button"===e.target.id&&parent.postMessage({pluginMessage:{type:"fechar"}},"*")})),parent.postMessage({pluginMessage:{type:"ui-ready"}},"*")}})[60]()})();